{"version":3,"sources":["layer_mapper.tsx"],"names":["style","source","level","Array","isArray","layers","avoidedLayers","filter","layer","map","index","layerIndex","length","type","entity","BackgroundLayer","setFilterLevel","id","RasterLayer","FillLayer","LineLayer","indexed","undefined","FillExtrusionLayer","SymbolLayer","HeatmapLayer","CircleLayer"],"mappings":"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","sourcesContent":["import React from 'react'\nimport MapboxGL from \"@react-native-mapbox-gl/maps\"\n\nimport BackgroundLayer from './layers/background_layer'\nimport CircleLayer from './layers/circle_layer'\nimport FillLayer from './layers/fill_layer'\nimport FillExtrusionLayer from './layers/fill_extrusion_layer'\nimport HeatmapLayer from './layers/heatmap_layer'\nimport LineLayer from './layers/line_layer'\nimport RasterLayer from './layers/raster_layer'\nimport SymbolLayer from './layers/symbol_layer'\n\nexport default (style: any, source: string, level: number = 0) => {\n  if (!style || !Array.isArray(style.layers)) {\n    return []\n  }\n\n  const avoidedLayers = style.layers\n    .filter((layer: any) => layer.source !== source)\n\n  const layers = style.layers\n    .filter((layer: any) => layer.source === source)\n\n  return layers.map((layer: any, index: number) => {\n    // let belowLayer = index === 0 ? undefined : constants.LAYER_USER_ACCURACY\n    let layerIndex = avoidedLayers.length + index\n\n    if (layer.type === 'background') {\n      const entity = new BackgroundLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.BackgroundLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n    if (layer.type === 'raster') {\n      const entity = new RasterLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.RasterLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n    if (layer.type === 'fill') {\n      const entity = new FillLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.FillLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n    if (layer.type === 'line') {\n      const entity = new LineLayer(layer)\n      entity.setFilterLevel(level)\n      const indexed = source === 'route' ? 800 : undefined\n      // if (source === 'route') {\n      //   belowLayer = undefined\n      // }\n      return <MapboxGL.LineLayer {...entity} key={`layer-${layer.id}`} layerIndex={indexed} style={entity.style}/>\n    }\n    if (layer.type === 'fill-extrusion') {\n      const entity = new FillExtrusionLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.FillExtrusionLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n    if (layer.type === 'symbol') {\n      const entity = new SymbolLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.SymbolLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n    if (layer.type === 'heatmap') {\n      const entity = new HeatmapLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.HeatmapLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n    if (layer.type === 'circle') {\n      const entity = new CircleLayer(layer)\n      entity.setFilterLevel(level)\n      return <MapboxGL.CircleLayer {...entity} key={`layer-${layer.id}`} style={entity.style}/>\n    }\n\n    return null\n  }) as any[]\n}\n"]}